{"version":3,"file":"string.js","names":["getType","value","Object","prototype","toString","call","slice","isArrowFunction","func","str","replace","arrow","indexOf","f","getFun","matches","match","Function","getArrowFun","setObj","obj","indexList","list","k","keys","cope","i","length","key","copyValue","setArray","arr","l","getRegExp","_construct","RegExp","_toConsumableArray","getUndefined","undefined","typeList","cur","concat","type","includes","t","push","exec","getSwitch","string","JSON","stringify","parse","_v$indexList","v","s","split","j","window","ya"],"sources":["../src/string.js"],"sourcesContent":["\r\nfunction getType(value) {\r\n    return Object.prototype.toString.call(value).slice(8, -1)\r\n}\r\n\r\nfunction isArrowFunction(func) {\r\n    const str = func.toString().replace(/\\s/g, '')\r\n    const arrow = str.indexOf('=>')\r\n    if (arrow === -1) return false;\r\n    const f = str.indexOf('){')\r\n    return arrow > f;\r\n}\r\n\r\nfunction getFun(str) {\r\n    const matches = str.match(/(\\w+)\\s*\\(([^)]*)\\)\\s*{([^]*)}/);\r\n    return new Function(matches[2], matches[3])\r\n}\r\nfunction getArrowFun(str) {\r\n    var matches = str.match(/\\((.*?)\\)\\s*=>\\s*{([\\s\\S]*)}/)\r\n    return new Function(matches[1], matches[2])\r\n}\r\n\r\nfunction setObj(obj, indexList, list) {\r\n    var k = Object.keys(obj), cope = {};\r\n    for (var i = k.length - 1; i>=0;i--) {\r\n        const key = k[i]\r\n        cope[key] = copyValue(obj[key],key , indexList, list)\r\n    }\r\n    return cope\r\n}\r\n\r\nfunction setArray(arr, indexList, list) {\r\n    var l = arr.length, cope = [];\r\n    for(var i = 0;i < l;i++ ) {\r\n        cope[i] = copyValue(arr[i], i, indexList, list )\r\n    }\r\n    return cope\r\n}\r\n\r\nfunction getRegExp(value) {\r\n    return new RegExp(...value)\r\n}\r\n\r\nfunction getUndefined() {\r\n    return undefined\r\n}\r\n\r\nconst typeList = ['String', 'Number', 'Null', 'Boolean']\r\n\r\n\r\nfunction copyValue (value, cur, indexList, list) {\r\n    list = list ? `${list},${cur}` : cur\r\n    const type = getType(value)\r\n    if (typeList.includes(type)) return value;\r\n    switch (type) {\r\n        case 'Object':\r\n            return setObj(value, indexList, list);\r\n        case 'Array':\r\n            return setArray(value, indexList, list);\r\n        case 'Function':\r\n            const t = isArrowFunction(value)\r\n            indexList.push(`${list},${t}Function`)\r\n            return value.toString();\r\n        case 'RegExp':\r\n            indexList.push(`${list},RegExp`)\r\n            return /(.+)\\/(.+)/.exec(value.toString().slice(1)).slice(1, 3);\r\n        case  'Undefined':\r\n            indexList.push(`${list},Undefined`)\r\n            return undefined\r\n    }\r\n}\r\n\r\nfunction getSwitch(type){\r\n    switch (type) {\r\n        case 'trueFunction':\r\n            return getArrowFun;\r\n        case 'falseFunction':\r\n            return getFun;\r\n        case 'RegExp':\r\n            return getRegExp\r\n        case 'Undefined':\r\n            return getUndefined\r\n    }\r\n}\r\n\r\nfunction string(obj) {\r\n    const indexList = []\r\n    return JSON.stringify({\r\n        value: copyValue(obj, '', indexList, ''),\r\n        indexList,\r\n        type: 'ya'\r\n    })\r\n}\r\n\r\nfunction parse(str) {\r\n    const v = JSON.parse(str)\r\n    if (v.type !== 'ya') return {}\r\n    const value = v.value\r\n    const list = v.indexList ?? []\r\n    for (var i = list.length - 1; i >= 0;i--) {\r\n        var s = value, k = list[i].split(','), l = k.length\r\n        for (var j = 0; j <= l - 3; j++) {\r\n            s = s[k[j]]\r\n        }\r\n        s[k[k.length - 2]] = getSwitch(k[l-1])(s[k[l - 2]])\r\n    }\r\n    return value;\r\n}\r\n\r\nwindow.ya = {\r\n    string,\r\n    parse\r\n}"],"mappings":"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"}